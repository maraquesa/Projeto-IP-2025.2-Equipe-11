import pygame
from operações import calcular_velocidade_diagonal

class Perssonagem(pygame.sprite.Sprite) :

    def __init__(self, velocidade : int, posicao_inicial : tuple[int, int]) :
        super().__init__()

        self.imagem = pygame.Surface((20,20))#mudar
        self.imagem.fill('Green')
        self.retangulo = self.imagem.get_rect(midbottom=(posicao_inicial[0], posicao_inicial[1]))
        self.velocidade = velocidade

        self.delay_movimento = 0



    def atualizar(self,tela) :
        tela.blit(self.imagem, self.retangulo)
        tecla = pygame.key.get_pressed()

        self.delay_movimento += 1

        tecla_a = True if tecla[pygame.K_a] else False
        tecla_d = True if tecla[pygame.K_d] else False
        tecla_w = True if tecla[pygame.K_w] else False
        tecla_s = True if tecla[pygame.K_s] else False

        #movimento
        if self.delay_movimento >= 10 :
            self.delay_movimento = 0
            if tecla_a :
                if tecla_s or tecla_w : self.alterar_x(calcular_velocidade_diagonal(-self.velocidade))
                else : self.alterar_x(-self.velocidade)

            if tecla_d :
                if tecla_s or tecla_w : self.alterar_x(calcular_velocidade_diagonal(self.velocidade))
                else : self.alterar_x(self.velocidade)

            if tecla_s :
                if tecla_a or tecla_d : self.alterar_y(calcular_velocidade_diagonal(self.velocidade))
                else : self.alterar_y(self.velocidade)

            if tecla_w :
                if tecla_a or tecla_d : self.alterar_y(calcular_velocidade_diagonal(-self.velocidade))
                else : self.alterar_y(-self.velocidade)



    def alterar_x(self, valor : float) :
        print(valor)
        self.retangulo.x += valor

    def alterar_y(self, valor : float) :
        self.retangulo.y += valor
